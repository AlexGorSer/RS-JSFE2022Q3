(()=>{"use strict";var t;!function(t){t[t.Unauthorized=401]="Unauthorized",t[t.NotFound=404]="NotFound"}(t||(t={}));var e,n=function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},o=function(){function e(t,e){this.baseLink=t,this.options=e}return e.prototype.getResp=function(t,e){var n=t.endpoint,o=t.options,r=void 0===o?{}:o;void 0===e&&(e=function(){console.error("No callback for GET response")}),this.load("GET",n,e,r)},e.prototype.errorHandler=function(e){if(!e.ok)throw e.status!==t.Unauthorized&&e.status!==t.NotFound||console.log("Sorry, but there is ".concat(e.status," error: ").concat(e.statusText)),Error(e.statusText);return e},e.prototype.makeUrl=function(t,e){var o=n(n({},this.options),t),r="".concat(this.baseLink).concat(e,"?");return Object.keys(o).forEach((function(t){r+="".concat(t,"=").concat(o[t],"&")})),r.slice(0,-1)},e.prototype.load=function(t,e,n,o){void 0===o&&(o={}),fetch(this.makeUrl(o,e),{method:t}).then(this.errorHandler).then((function(t){return t.json()})).then((function(t){return n(t)})).catch((function(t){return console.error(t)}))},e}(),r=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)});const c=function(t){function e(){return t.call(this,"https://nodenews.up.railway.app/",{apiKey:"cae83f58930342f2b3b5f2e76849cadf"})||this}return r(e,t),e}(o);var u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getSources=function(e){t.prototype.getResp.call(this,{endpoint:"sources"},e)},e.prototype.getNews=function(e,n){for(var o=e.target,r=e.currentTarget;o!==r;){if(o.classList.contains("source__item")){var c=o.getAttribute("data-source-id");return void(r.getAttribute("data-source")!==c&&(r.setAttribute("data-source",c),t.prototype.getResp.call(this,{endpoint:"everything",options:{sources:c}},n)))}o=o.parentNode}},e}(c);var s=function(){function t(){}return t.prototype.draw=function(t){var e=t.length>=10?t.filter((function(t,e){return e<10})):t,n=document.createDocumentFragment(),o=document.querySelector("#newsItemTemp");e.forEach((function(t,e){var r,c=o.content.cloneNode(!0);e%2&&(null===(r=c.querySelector(".news__item"))||void 0===r||r.classList.add("alt")),c.querySelector(".news__meta-photo").style.backgroundImage="url(".concat(t.urlToImage||"img/news_placeholder.jpg",")"),c.querySelector(".news__meta-author").textContent=t.author||t.source.name,c.querySelector(".news__meta-date").textContent=t.publishedAt.slice(0,10).split("-").reverse().join("-"),c.querySelector(".news__description-title").textContent=t.title,c.querySelector(".news__description-source").textContent=t.source.name,c.querySelector(".news__description-content").textContent=t.description,c.querySelector(".news__read-more a").setAttribute("href",t.url),n.append(c)})),document.querySelector(".news").innerHTML="",document.querySelector(".news").appendChild(n)},t}();const a=s,l=function(){function t(){}return t.prototype.draw=function(t){var e=document.createDocumentFragment(),n=document.querySelector("#sourceItemTemp");t.forEach((function(t){var o=n.content.cloneNode(!0);o.querySelector(".source__item-name").textContent=t.name,o.querySelector(".source__item").setAttribute("data-source-id",t.id),e.append(o)})),document.querySelector(".sources").append(e)},t}();var p=function(){function t(){this.news=new a,this.sources=new l}return t.prototype.drawNews=function(t){var e=(null==t?void 0:t.articles)?null==t?void 0:t.articles:[];this.news.draw(e)},t.prototype.drawSources=function(t){var e=(null==t?void 0:t.sources)?null==t?void 0:t.sources:[];this.sources.draw(e)},t}();(new(function(){function t(){this.controller=new i,this.view=new p}return t.prototype.start=function(){var t=this,e=document.querySelector(".sources");null==e||e.addEventListener("click",(function(e){return t.controller.getNews(e,(function(e){return t.view.drawNews(e)}))})),this.controller.getSources((function(e){return t.view.drawSources(e)}))},t}())).start()})();